[toc]

## 1.进程的定义

> 一个具有独立功能的程序在一个数据集合上的一次动态执行过程
>
> 资源：CPU、内存、网络、IO等
>
> 代码是静态的，属于程序，OS将代码调入内存中执行到结束，这个动态的执行过程称为进程，这个过程可以通过CPU处理一条条指令、对各种数据进行处理等。

- 例

  小明蛋糕制作过程，需要食谱，原材料。

  食谱 = 程序，小明 = cpu， 原料 = 数据，做蛋糕的过程 = 进程

  做蛋糕的过程中，可以暂停，去做其他事情，并在食谱上标记，也就是进程的切换

## 2.进程状态

进程的生命周期：

![](https://s2.ax1x.com/2019/03/31/Aryfbt.png)

- 进程创建

  引起进程创建的三个主要事件

  1. 系统初始化
  2. 用户请求创建一个新进程
  3. 正在运行的进程执行了创建进程的系统调用

- 进程运行

  内核选择一个就绪的进程，让它占用处理机并执行（就绪态 -> 运行态）

- 进程等待（阻塞）

  以下情况，进程进入阻塞态

  1. 请求并等待系统服务，无法马上完成
  2. 启动某种操作，无法马上完成
  3. 需要的数据没有到达

  进程只能阻塞自己，因为只有进程自身才能知道何时需要等待某种事件发生

- 进程唤醒

  进程只能被别的进程或者操作系统唤醒

- 进程结束

  1. 正常退出
  2. 错误退出
  3. 致命错误
  4. 被其他进程所杀

## 3.程序和进程的联系

- 程序是进程的基础

- 程序的每次运行构成不同的进程

- 进程是程序功能的体现

- 通过多次执行、一个程序可对应多个进程，通过调用关系，一个进程可以包含多个程序

- 进程有核心态、用户态，我们写的代码跑用户态，系统进程跑核心态。

  例如：用户进程要读一个文件，需要向操作系统发出请求，系统读文件的进程运行在内核中

## 4.进程的特点

- 动态性：可动态地创建、结束进程

- 并发性：进程可以被独立调度并占用处理器运行

  注意区别并发和并行

  并行：同一时刻有多个进程同时运行

  并发：同一时间段内有多个进程同时运行

  如果只有一个单核cpu无法实现并行

- 独立性：不同进程的工作不互相影响

  操作系统如何保障进程独立性：通过页表、不同的程序访问不同的地址空间，如果越过地址空间，会产生缺页异常

- 制约性：因访问共享数据/资源或进程间同步而产生制约

## 5.进程控制块

- PCB（Process Control Block）进程控制块，操作系统为每个进程维护了一个PCB，用来保存与该进程有关的各种状态信息。

- PCB是进程存在的唯一标志，操作系统用PCB来描述进程的基本情况和运行变化的过程。

- 进程的创建：为该进程创建一个PCB

- 进程的终止：回收它的PCB

- 进程的组织管理：通过对PCB的组织管理来实现

- PCB包含三大类信息：

  1. 进程标识信息：如本进程的标识，本进程的产生者标识（父进程），用户标识

  2. 处理机状态信息保存区。保存进程的运行现场信息。

     - 用户可见寄存器，用户程序可以使用的数据，地址等寄存器

     - 控制和状态寄存器，如程序计数器（PC），程序状态字（PSW）
     - 栈指针，过程调用、系统调用、中断处理和返回时需要用到它

  3. 进程控制信息：

     - 调度和状态信息，用于操作系统调度进程并占用处理机使用（进程处于执行、就绪或者其他状态）
     - 进程间通信信息，为支持进程间的与通信相关的各种标识、信息、信件等，这些信息存在接收方的进程控制块中
     - 存储管理信息，包含有指向本进程映像存储空间的数据结构
     - 进程所用资源，说明由进程打开、使用的系统资源，如打开的文件等。
     - 有关数据结构连接信息，进程可以连接到一个进程队列中，或连接到相关的其他进程PCB

## 6.进程一般采用链表组织，为什么？

> 进程的执行是一个动态过程，需要频繁创建、回收，链表插入、删除的效率较高
>
> 同一状态的进程其PCB组成一个链表，多个状态对应多个不同的链表

## 7.进程挂起

> 进程在挂起状态时，意味着进程没有占用内存空间，处在挂起状态的进程映像在磁盘上

- 阻塞挂起状态：进程在外存并等待某事件的出现
- 就绪挂起状态：进程在外存，但只要进入内存，即可运行